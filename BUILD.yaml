
# 名称
name: open-webui

# 版本
version: 0.1.124

# 镜像编译参数
docker:
  # 镜像名称
  image: snz1dp/open-webui
  tag: latest
  # 编译文件
  file: Dockerfile
  # 目标平台
  platform:
  - linux/amd64
  - linux/arm64

# 服务定义
service:

  # 文件卷定义
  volumes:
  - data:/app/backend/data

  # 端口定义
  ports:
  - 8080:8080

  # 环境变量
  envs:
  - TZ=Asia/Shanghai
  - ENV=prod
  - USE_CUDA_DOCKER=false
  - USE_CUDA_DOCKER_VER=cu121
  - RAG_EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
  - USE_RERANKING_MODEL_DOCKER=${USE_RERANKING_MODEL}

  # 心跳检测
  healthcheck:
    url: /health
    interval: 10s
    timeout: 10s
    period: 60s
    retries: 30

  # 路由定义
  ingress:
  - backend-port: 8080
    preserve-host: true
    strip-path: true
    sso:
    - /open-webui
